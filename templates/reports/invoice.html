{% extends "vertical.html" %}
{% load static i18n %}

{% block title %}{{title}}{% endblock title %}

{% block page_content %}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="clearfix">  
                    <div class="float-sm-end">
                        <div class="auth-logo">
                            <h4 class="m-0">Aronee</h4>
                        </div>
                        <address class="mt-3">
                            Kerala, India<br>
                            <abbr title="Phone">P:</abbr> (123) 456-7890
                        </address>
                    </div>                                                
                    <div class="float-sm-start">
                        <h5 class="card-title mb-2">Invoice: #TRIP-{{ trip.id }}</h5>
                        <p>{{ trip.trip_date|date:"d M Y" }}</p>
                    </div>                                      
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <h6 class="fw-normal text-muted">Billed To</h6>
                        <h6 class="fs-16">{{ trip.customer.name }}</h6>
                        <address>
                            {{ trip.customer.address|linebreaksbr|default:"No address provided" }}<br>
                            <abbr title="Phone">P:</abbr> {{ trip.customer.phone }}
                        </address>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="table-responsive table-borderless text-nowrap mt-3 table-centered">
                            <table class="table mb-0">
                                <thead class="bg-light bg-opacity-50">
                                    <tr>
                                        <th class="border-0 py-2">Item / Description</th>
                                        <th class="text-end border-0 py-2">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <strong>
                                                {% if trip.package %}
                                                    Package: {{ trip.package.name }}
                                                {% else %}
                                                    Custom Trip Service
                                                {% endif %}
                                            </strong>
                                            <br>
                                            <small class="text-muted">
                                                {% if trip.customer.from_location and trip.customer.to_location %}
                                                    Route: {{ trip.customer.from_location }} to {{ trip.customer.to_location }}
                                                {% endif %}
                                            </small>
                                        </td>
                                        <td class="text-end">₹{{ base_price|floatformat:2 }}</td>
                                    </tr>
                                    {% if trip.additional_distance > 0 %}
                                    <tr>
                                        <td>
                                            <strong>Additional Distance Charge</strong>
                                            <br>
                                            <small class="text-muted">{{ trip.additional_distance }} extra kilometers</small>
                                        </td>
                                        <td class="text-end">₹{{ additional_cost|floatformat:2 }}</td>
                                    </tr>
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>                                     

                <div class="row mt-4">
                    <div class="col-sm-7">
                        <div class="clearfix pt-xl-3 pt-0">
                            <h6 class="text-muted">Notes:</h6>
                            <small class="text-muted">{{ trip.remarks|default:"Thank you for choosing Aronee!" }}</small>
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="float-end">
                            <p><span class="fw-medium">Sub-total :</span> 
                                <span class="float-end">₹{{ grand_total|floatformat:2 }}</span>
                            </p>
                            <p><span class="fw-medium">Advance Paid :</span> 
                                <span class="float-end">- ₹{{ trip.advance_paid|floatformat:2 }}</span>
                            </p>
                            <p><span class="fw-medium">Final Payment :</span> 
                                <span class="float-end">- ₹{{ trip.final_payment_amount|floatformat:2|default:"0.00" }}</span>
                            </p>
                            <h3 class="text-danger">Balance Due: ₹{{ balance_due|floatformat:2 }}</h3>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>

                <div class="mt-5 mb-1">
                    <div class="text-center d-print-none">
                        <a href="javascript:window.print()" class="btn btn-primary width-md"><i class="ri-printer-line"></i> Print</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock page_content %}